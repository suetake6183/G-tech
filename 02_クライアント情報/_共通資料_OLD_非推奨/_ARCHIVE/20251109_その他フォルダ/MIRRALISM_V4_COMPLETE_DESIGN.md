# MIRRALISM V4 å®Œå…¨è¨­è¨ˆæ›¸

**AIä¸»å°å‹æƒ…å ±ç†è§£ã‚·ã‚¹ãƒ†ãƒ ã®åŒ…æ‹¬çš„è¨­è¨ˆä»•æ§˜**

---

## ğŸ“‹ æ–‡æ›¸æƒ…å ±

- **æ–‡æ›¸å**: MIRRALISM V4 å®Œå…¨è¨­è¨ˆæ›¸
- **ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0
- **ä½œæˆæ—¥**: 2025å¹´6æœˆ14æ—¥
- **æ›´æ–°æ—¥**: 2025å¹´6æœˆ14æ—¥
- **å¯¾è±¡ã‚·ã‚¹ãƒ†ãƒ **: MIRRALISM V4 AIä¸»å°å‹æƒ…å ±ç†è§£ã‚·ã‚¹ãƒ†ãƒ 

---

## ğŸ“– ç›®æ¬¡

1. [è¨­è¨ˆæ€æƒ³ã®è»¢æ›](#ç¬¬1ç« è¨­è¨ˆæ€æƒ³ã®è»¢æ›)
2. [æŠ€è¡“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ç¬¬2ç« æŠ€è¡“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)  
3. [AIç†è§£ã‚¨ãƒ³ã‚¸ãƒ³è¨­è¨ˆ](#ç¬¬3ç« aiç†è§£ã‚¨ãƒ³ã‚¸ãƒ³è¨­è¨ˆ)
4. [æƒ…å ±æ§‹é€ åŒ–ã‚·ã‚¹ãƒ†ãƒ ](#ç¬¬4ç« æƒ…å ±æ§‹é€ åŒ–ã‚·ã‚¹ãƒ†ãƒ )
5. [æ®µéšçš„å®Ÿè£…æˆ¦ç•¥](#ç¬¬5ç« æ®µéšçš„å®Ÿè£…æˆ¦ç•¥)
6. [æŠ€è¡“ä»•æ§˜](#ç¬¬6ç« æŠ€è¡“ä»•æ§˜)

---

## ç¬¬1ç« ï¼šè¨­è¨ˆæ€æƒ³ã®è»¢æ›

### 1.1 ãƒ‘ãƒ©ãƒ€ã‚¤ãƒ ã‚·ãƒ•ãƒˆã®æ ¸å¿ƒ

#### 1.1.1 AIä¸»å°å‹ã‚·ã‚¹ãƒ†ãƒ ã®æ ¸å¿ƒä¾¡å€¤

**MIRRALISM V4ã®è¨­è¨ˆåŸå‰‡**
```yaml
æ ¸å¿ƒæ©Ÿèƒ½:
  - AIä¸»å°ã®æƒ…å ±ç†è§£
  - æ„å‘³çš„è§£æã«ã‚ˆã‚‹æ´å¯Ÿç”Ÿæˆ
  - å¯¾è©±ãƒ™ãƒ¼ã‚¹ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
  - å‹•çš„ãªé–¢é€£æ€§ãƒãƒƒãƒ”ãƒ³ã‚°
  - æ–‡è„ˆä¿æŒã«ã‚ˆã‚‹ç¶™ç¶šçš„å­¦ç¿’
  - äººé–“ã¨AIã®å…±å‰µãƒ—ãƒ­ã‚»ã‚¹

æŠ€è¡“çš„ç‰¹å¾´:
  - Claude Codeçµ±åˆé–‹ç™ºç’°å¢ƒ
  - Opus/Sonnetå‹•çš„åˆ‡ã‚Šæ›¿ãˆ
  - ã‚³ã‚¹ãƒˆæœ€é©åŒ–æ©Ÿèƒ½
  - ç¾å®Ÿçš„ãªæ®µéšçš„å®Ÿè£…
```

#### 1.1.2 AIä¸»å°å‹æƒ…å ±å‡¦ç†ãƒ•ãƒ­ãƒ¼

**MIRRALISM V4ã®å‡¦ç†ãƒ—ãƒ­ã‚»ã‚¹**
```
å…¥åŠ› â†’ AIç†è§£ â†’ æ–‡è„ˆåˆ¤å®š â†’ æ´å¯Ÿç”Ÿæˆ â†’ äººé–“ã¨å¯¾è©± â†’ å…±å‰µ
```

**ä¾¡å€¤ææ¡ˆ**
```yaml
ç†è§£ä¸­å¿ƒ:
  - æƒ…å ±ã®æ„å‘³ã‚’æ·±ãç†è§£
  - æ–‡è„ˆã«åŸºã¥ãé–¢é€£æ€§åˆ¤å®š
  - èƒ½å‹•çš„ãªæ´å¯Ÿææ¡ˆ

åŠ¹ç‡åŒ–:
  - è‡ªå‹•åˆ†é¡ãƒ»æ•´ç†
  - é‡è¤‡æ¤œçŸ¥ãƒ»çµ±åˆ
  - ç¶™ç¶šçš„å­¦ç¿’ãƒ»æ”¹å–„

å‰µé€ æ”¯æ´:
  - æ–°ã—ã„è¦–ç‚¹ã®æç¤º
  - ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ã®ææ¡ˆ
  - æˆ¦ç•¥çš„æ´å¯Ÿã®ç”Ÿæˆ
```

### 1.2 AIä¸»å°å‹ã‚·ã‚¹ãƒ†ãƒ ã®è¨­è¨ˆåŸå‰‡

#### 1.2.1 ç†è§£å„ªå…ˆã®åŸå‰‡
- AIãŒã¾ãšæƒ…å ±ã®**æ„å‘³**ã‚’ç†è§£ã™ã‚‹
- **æ–‡è„ˆ**ã‚’ä¿æŒã—ã€é–¢é€£æ€§ã‚’è‡ªå‹•åˆ¤å®š
- **æ´å¯Ÿ**ã‚’èƒ½å‹•çš„ã«ç”Ÿæˆãƒ»ææ¡ˆ

#### 1.2.2 å…±å‰µãƒ—ãƒ­ã‚»ã‚¹ã®åŸå‰‡  
- AIã¯**ææ¡ˆ**ã—ã€äººé–“ãŒ**æ±ºå®š**ã™ã‚‹
- ç¶™ç¶šçš„ãª**å­¦ç¿’**ã¨**æ”¹å–„**
- **é€æ˜æ€§**ã®ã‚ã‚‹åˆ¤å®šãƒ—ãƒ­ã‚»ã‚¹

#### 1.2.3 é©å¿œæ€§ã®åŸå‰‡
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã«**é©å¿œ**
- **æ–‡è„ˆ**ã«å¿œã˜ãŸå‡¦ç†æ–¹æ³•ã®å‹•çš„å¤‰æ›´
- **é€²åŒ–**ã™ã‚‹ç†è§£èƒ½åŠ›

### 1.3 å®Ÿè£…ç®¡ç†è¦é …

#### TaskMasteré€£æºç®¡ç†
```yaml
ç®¡ç†é …ç›®:
  - è¨­è¨ˆæ€æƒ³ã®å®Ÿè£…çŠ¶æ³è¿½è·¡
  - AIä¸»å°å‹æ©Ÿèƒ½ã®å“è³ªãƒã‚§ãƒƒã‚¯
  - ãƒ‘ãƒ©ãƒ€ã‚¤ãƒ ã‚·ãƒ•ãƒˆé”æˆåº¦æ¸¬å®š

å®Œäº†å®šç¾©:
  - AIç†è§£æ©Ÿèƒ½ã®å‹•ä½œç¢ºèª
  - å¾“æ¥å‹UIè¦ç´ ã®å®Œå…¨æ’é™¤
  - å¯¾è©±ãƒ™ãƒ¼ã‚¹ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®å®Ÿè£…
```

---

## ç¬¬2ç« ï¼šæŠ€è¡“ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### 2.1 ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆæ¦‚è¦

#### 2.1.1 ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³

```mermaid
graph TD
    A[CLI Interface<br/>Cursorçµ±åˆ] --> B[Input Processor]
    B --> C[AI Brain<br/>Claude Opus/Sonnet]
    C --> D[Understanding Engine]
    D --> E[Context Analyzer]
    E --> F[Insight Generator]
    F --> G[Output Organizer]
    G --> H[File System<br/>æ§‹é€ åŒ–ä¿å­˜]
    
    I[Cost Optimizer] --> C
    J[Quality Assurance] --> F
    K[Error Handler] --> B
    K --> C
    K --> G
```

#### 2.1.2 æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

**æ ¸å¿ƒæŠ€è¡“**
```yaml
AI Engine:
  Primary: Claude Opus 4 (claude-opus-4-20250514)
  Secondary: Claude Sonnet 4 (claude-sonnet-4-20250514)
  Fallback: Claude 3.5 Sonnet (claude-3-5-sonnet-20241022)
  
Development Platform:
  Environment: Claude Code (Cursorçµ±åˆ)
  Language: Python 3.8+
  
API Integration:
  Provider: Anthropic API
  Authentication: API Key based
  Rate Limiting: 1 request/second minimum
```

**ä¾å­˜é–¢ä¿‚**
```python
# requirements.txt
anthropic>=0.18.0
python-dotenv>=1.0.0
pathlib
json
datetime
asyncio  # å°†æ¥ã®éåŒæœŸåŒ–ç”¨
```

### 2.2 Claude Codeçµ±åˆè¨­è¨ˆ

#### 2.2.1 é–‹ç™ºç’°å¢ƒçµ±åˆ
```yaml
çµ±åˆãƒ¬ãƒ™ãƒ«:
  - Cursor IDEå†…ã§ã®å®Œå…¨é–‹ç™º
  - Claude Codeã¨ã®å¯¾è©±ãƒ™ãƒ¼ã‚¹å®Ÿè£…
  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚³ãƒ¼ãƒ‰ç”Ÿæˆãƒ»ä¿®æ­£
  - çµ±åˆãƒ‡ãƒãƒƒã‚°ç’°å¢ƒ

é–‹ç™ºãƒ•ãƒ­ãƒ¼:
  1. è¨­è¨ˆæ›¸ãƒ™ãƒ¼ã‚¹ã®è¦æ±‚å®šç¾©
  2. Claude Codeã¨ã®å¯¾è©±ã«ã‚ˆã‚‹å®Ÿè£…
  3. å‹•çš„ãƒ†ã‚¹ãƒˆãƒ»ä¿®æ­£ã‚µã‚¤ã‚¯ãƒ«
  4. å“è³ªç¢ºèªãƒ»ãƒ‡ãƒ—ãƒ­ã‚¤
```

#### 2.2.2 ãƒ¢ãƒ‡ãƒ«åˆ‡ã‚Šæ›¿ãˆæˆ¦ç•¥

**å‹•çš„ãƒ¢ãƒ‡ãƒ«é¸æŠã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ **
```python
def select_optimal_model(task_complexity, budget_status):
    """
    ã‚¿ã‚¹ã‚¯ã®è¤‡é›‘ã•ã¨äºˆç®—çŠ¶æ³ã«åŸºã¥ã„ã¦ãƒ¢ãƒ‡ãƒ«ã‚’é¸æŠ
    """
    complexity_indicators = [
        "åˆ†æ", "æˆ¦ç•¥", "ææ¡ˆ", "è©³ç´°", "è¤‡é›‘", "è¨­è¨ˆ"
    ]
    
    if task_complexity >= 0.7:  # é«˜è¤‡é›‘åº¦
        if budget_status < 0.8:  # äºˆç®—ä½™è£•ã‚ã‚Š
            return "claude-opus-4-20250514"
    
    return "claude-sonnet-4-20250514"  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ
```

**ã‚³ã‚¹ãƒˆæœ€é©åŒ–æˆ¦ç•¥**
```yaml
æœˆé¡äºˆç®—ç®¡ç†:
  åŸºæœ¬äºˆç®—: $5-50/æœˆ
  åˆ¶é™æ–¹å¼: ã‚½ãƒ•ãƒˆåˆ¶é™ï¼ˆè­¦å‘Šï¼‰+ ãƒãƒ¼ãƒ‰åˆ¶é™ï¼ˆåœæ­¢ï¼‰
  
ä½¿ç”¨é‡è¿½è·¡:
  - ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ã‚³ã‚¹ãƒˆè¨ˆç®—
  - æ—¥æ¬¡ãƒ»é€±æ¬¡ãƒ»æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆ
  - äºˆç®—åˆ°é”æ™‚ã®è‡ªå‹•ãƒ•ã‚©ãƒ¼ãƒ«ãƒãƒƒã‚¯

æœ€é©åŒ–æ‰‹æ³•:
  - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°ï¼ˆæœ€å¤§90%å‰Šæ¸›ï¼‰
  - ãƒãƒƒãƒå‡¦ç†ï¼ˆéç·Šæ€¥ã‚¿ã‚¹ã‚¯50%å‰Šæ¸›ï¼‰
  - ãƒˆãƒ¼ã‚¯ãƒ³åŠ¹ç‡çš„ãªãƒ—ãƒ­ãƒ³ãƒ—ãƒˆè¨­è¨ˆ
```

**å…·ä½“çš„ã‚³ã‚¹ãƒˆè¨ˆç®—å®Ÿè£…**
```python
class CostCalculator:
    """
    Claude APIã®å®Ÿéš›ã®æ–™é‡‘ä½“ç³»ã«åŸºã¥ãæ­£ç¢ºãªã‚³ã‚¹ãƒˆè¨ˆç®—
    """
    # 2025å¹´6æœˆæ™‚ç‚¹ã®æ­£ç¢ºãªæ–™é‡‘ï¼ˆper 1M tokensï¼‰
    PRICING = {
        "claude-opus-4-20250514": {
            "input": 15.0,   # $15 per 1M input tokens
            "output": 75.0   # $75 per 1M output tokens
        },
        "claude-sonnet-4-20250514": {
            "input": 3.0,    # $3 per 1M input tokens
            "output": 15.0   # $15 per 1M output tokens
        },
        "claude-3-5-sonnet-20241022": {
            "input": 3.0,    # $3 per 1M input tokens
            "output": 15.0   # $15 per 1M output tokens
        }
    }
    
    def calculate_actual_cost(self, model: str, input_tokens: int, output_tokens: int) -> float:
        """
        å®Ÿéš›ã®APIãƒ¬ã‚¹ãƒãƒ³ã‚¹ã‹ã‚‰æ­£ç¢ºãªã‚³ã‚¹ãƒˆã‚’è¨ˆç®—
        
        Args:
            model: ä½¿ç”¨ã—ãŸãƒ¢ãƒ‡ãƒ«å
            input_tokens: å®Ÿéš›ã®å…¥åŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°
            output_tokens: å®Ÿéš›ã®å‡ºåŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°
            
        Returns:
            float: å®Ÿéš›ã®ã‚³ã‚¹ãƒˆï¼ˆUSDï¼‰
        """
        if model not in self.PRICING:
            raise ValueError(f"Unknown model: {model}")
            
        rates = self.PRICING[model]
        input_cost = (input_tokens / 1_000_000) * rates["input"]
        output_cost = (output_tokens / 1_000_000) * rates["output"]
        
        return input_cost + output_cost
    
    def estimate_cost_before_call(self, model: str, estimated_input_tokens: int) -> float:
        """
        APIå‘¼ã³å‡ºã—å‰ã®ã‚³ã‚¹ãƒˆæ¦‚ç®—
        
        Args:
            model: ä½¿ç”¨äºˆå®šã®ãƒ¢ãƒ‡ãƒ«
            estimated_input_tokens: æ¨å®šå…¥åŠ›ãƒˆãƒ¼ã‚¯ãƒ³æ•°
            
        Returns:
            float: æ¨å®šã‚³ã‚¹ãƒˆï¼ˆå®‰å…¨ãƒãƒ¼ã‚¸ãƒ³è¾¼ã¿ï¼‰
        """
        if model not in self.PRICING:
            model = "claude-sonnet-4-20250514"  # ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯Sonnet 4
            
        rates = self.PRICING[model]
        
        # å…¥åŠ›ã‚³ã‚¹ãƒˆ
        input_cost = (estimated_input_tokens / 1_000_000) * rates["input"]
        
        # å‡ºåŠ›ã¯å…¥åŠ›ã®3-5å€ã¨ä»®å®šï¼ˆå®‰å…¨ãƒãƒ¼ã‚¸ãƒ³ï¼‰
        estimated_output_tokens = estimated_input_tokens * 4
        output_cost = (estimated_output_tokens / 1_000_000) * rates["output"]
        
        # 20%ã®å®‰å…¨ãƒãƒ¼ã‚¸ãƒ³ã‚’è¿½åŠ 
        total_estimated = (input_cost + output_cost) * 1.2
        
        return total_estimated
    
    def get_cost_efficiency_ratio(self, model: str) -> float:
        """
        ãƒ¢ãƒ‡ãƒ«ã®ã‚³ã‚¹ãƒˆåŠ¹ç‡æ¯”ã‚’è¨ˆç®—ï¼ˆSonnetã‚’åŸºæº–ï¼‰
        
        Returns:
            float: Sonnetã«å¯¾ã™ã‚‹ç›¸å¯¾ã‚³ã‚¹ãƒˆæ¯”
        """
        sonnet_avg_cost = (self.PRICING["claude-sonnet-4-20250514"]["input"] + 
                          self.PRICING["claude-sonnet-4-20250514"]["output"]) / 2
        
        if model not in self.PRICING:
            return 1.0
            
        model_avg_cost = (self.PRICING[model]["input"] + 
                         self.PRICING[model]["output"]) / 2
        
        return model_avg_cost / sonnet_avg_cost
```

### 2.3 ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è¨­è¨ˆ

#### 2.3.1 CLIä»•æ§˜
```bash
# åŸºæœ¬ä½¿ç”¨æ–¹æ³•
python mirralism.py "é»’æ¾¤å·¥å‹™åº—ã®ã‚¨ã‚³ä½å®…ç›¸è«‡å†…å®¹..."

# ã‚ªãƒ—ã‚·ãƒ§ãƒ³æŒ‡å®š
python mirralism.py --model opus "è¤‡é›‘ãªæˆ¦ç•¥åˆ†æã‚¿ã‚¹ã‚¯"
python mirralism.py --file meeting_notes.txt
python mirralism.py --budget-check  # ä½¿ç”¨é‡ç¢ºèª

# å¯¾è©±ãƒ¢ãƒ¼ãƒ‰
python mirralism.py --interactive
```

#### 2.3.2 ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼
```json
{
  "success": true,
  "understanding": {
    "client": "é»’æ¾¤å·¥å‹™åº—",
    "type": "ç›¸è«‡",
    "complexity": "medium",
    "summary": "ã‚¨ã‚³ä½å®…ã®è£œåŠ©é‡‘æ´»ç”¨ç›¸è«‡",
    "insights": [
      "åˆæœŸæŠ•è³‡30%å‰Šæ¸›ã®å¯èƒ½æ€§",
      "10å¹´åæ”¯ã§å¾“æ¥å·¥æ³•ã‚ˆã‚Šæœ‰åˆ©",
      "å·®åˆ¥åŒ–è¦ç´ ã¨ã—ã¦æ´»ç”¨å¯èƒ½"
    ]
  },
  "output_path": "./MIRRALISM_OUTPUT/Clients/é»’æ¾¤å·¥å‹™åº—/Projects/2025-06_ã‚¨ã‚³ä½å®…/",
  "cost_info": {
    "model_used": "claude-sonnet-4",
    "tokens": 1250,
    "cost": 0.0187,
    "monthly_usage": 15.67
  }
}
```

### 2.4 å®Ÿè£…ç®¡ç†è¦é …

#### TaskMasteré€£æºç®¡ç†
```yaml
Phase 2 ç®¡ç†é …ç›®:
  - Claude Codeçµ±åˆãƒ¬ãƒ™ãƒ«ã®ç¢ºèª
  - ãƒ¢ãƒ‡ãƒ«åˆ‡ã‚Šæ›¿ãˆæ©Ÿèƒ½ã®å‹•ä½œãƒ†ã‚¹ãƒˆ
  - ã‚³ã‚¹ãƒˆæœ€é©åŒ–åŠ¹æœã®æ¸¬å®š
  - CLI ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã®æ“ä½œæ€§æ¤œè¨¼

å®Œäº†å®šç¾©:
  - ä¸¡ãƒ¢ãƒ‡ãƒ«ã§ã®æ­£å¸¸å‹•ä½œç¢ºèª
  - äºˆç®—åˆ¶é™æ©Ÿèƒ½ã®å‹•ä½œç¢ºèª
  - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ã®ç¶²ç¾…æ€§ç¢ºèª
  - è¨­è¨ˆæ›¸è¨˜è¼‰ã®ãƒ¬ã‚¹ãƒãƒ³ã‚¹å½¢å¼ã®æº–æ‹ 
```

---

## ç¬¬3ç« ï¼šAIç†è§£ã‚¨ãƒ³ã‚¸ãƒ³è¨­è¨ˆ

### 3.1 ç†è§£ãƒ—ãƒ­ã‚»ã‚¹ã®è¨­è¨ˆ

#### 3.1.1 æ®µéšçš„ç†è§£ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

**Step 1: åŸºæœ¬è§£æ**
```python
def basic_analysis(input_text):
    """
    å…¥åŠ›ã®åŸºæœ¬çš„ãªç‰¹å¾´ã‚’æŠ½å‡º
    """
    return {
        "language": detect_language(input_text),
        "length": len(input_text),
        "type": classify_content_type(input_text),
        "entities": extract_entities(input_text),
        "keywords": extract_keywords(input_text)
    }
```

**Step 2: æ–‡è„ˆç†è§£**
```python
def contextual_understanding(basic_info, input_text):
    """
    æ–‡è„ˆã¨é–¢é€£æ€§ã‚’ç†è§£
    """
    context_prompt = f"""
    ä»¥ä¸‹ã®æƒ…å ±ã‚’åˆ†æã—ã€ãƒ“ã‚¸ãƒã‚¹æ–‡è„ˆã‚’ç†è§£ã—ã¦ãã ã•ã„ï¼š
    
    å…¥åŠ›: {input_text}
    åŸºæœ¬æƒ…å ±: {basic_info}
    
    ä»¥ä¸‹ã®è¦³ç‚¹ã§åˆ†æã—ã¦ãã ã•ã„ï¼š
    1. ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆæƒ…å ±ï¼ˆä¼æ¥­åã€å€‹äººåã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåï¼‰
    2. å†…å®¹ã®ç¨®åˆ¥ï¼ˆç›¸è«‡ã€å ±å‘Šã€ã‚¿ã‚¹ã‚¯ã€ã‚¢ã‚¤ãƒ‡ã‚¢ã€å­¦ç¿’ãƒ¡ãƒ¢ï¼‰
    3. ç·Šæ€¥åº¦ãƒ»é‡è¦åº¦
    4. é–¢é€£ã™ã‚‹éå»ã®æƒ…å ±
    5. å¿…è¦ãªã‚¢ã‚¯ã‚·ãƒ§ãƒ³
    """
    
    return claude_api.call(context_prompt)
```

**Step 3: æ´å¯Ÿç”Ÿæˆ**
```python
def generate_insights(understanding):
    """
    ç†è§£å†…å®¹ã‹ã‚‰æ´å¯Ÿã‚’ç”Ÿæˆ
    """
    insight_prompt = f"""
    ä»¥ä¸‹ã®ç†è§£å†…å®¹ã‹ã‚‰ã€ãƒ“ã‚¸ãƒã‚¹ä¾¡å€¤ã®ã‚ã‚‹æ´å¯Ÿã‚’ç”Ÿæˆã—ã¦ãã ã•ã„ï¼š
    
    ç†è§£å†…å®¹: {understanding}
    
    ç”Ÿæˆã™ã‚‹æ´å¯Ÿï¼š
    1. ãƒ“ã‚¸ãƒã‚¹æ©Ÿä¼šã®ç‰¹å®š
    2. ãƒªã‚¹ã‚¯ã‚„èª²é¡Œã®æ´å¯Ÿ
    3. æ¨å¥¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³
    4. é–¢é€£æƒ…å ±ã‚„å‚è€ƒäº‹ä¾‹
    5. é•·æœŸçš„ãªå½±éŸ¿åˆ†æ
    
    JSONå½¢å¼ã§è¿”ã—ã¦ãã ã•ã„ã€‚
    """
    
    return claude_api.call(insight_prompt)
```

#### 3.1.2 å“è³ªä¿è¨¼ã‚·ã‚¹ãƒ†ãƒ 

**ç†è§£ç²¾åº¦ã®æ¤œè¨¼**
```python
class UnderstandingQA:
    def __init__(self):
        self.quality_thresholds = {
            "entity_extraction": 0.8,
            "context_accuracy": 0.85,
            "insight_relevance": 0.9
        }
    
    async def validate_understanding(self, input_text, understanding):
        """
        ç†è§£ã®å“è³ªã‚’å¤šè§’çš„ã«æ¤œè¨¼
        """
        validations = {
            "completeness": self._check_completeness(understanding),
            "accuracy": self._verify_accuracy(input_text, understanding),
            "relevance": self._assess_relevance(understanding),
            "actionability": self._check_actionability(understanding)
        }
        
        overall_score = sum(validations.values()) / len(validations)
        
        if overall_score < 0.8:
            return {"retry_required": True, "reason": "å“è³ªåŸºæº–æœªé”"}
        
        return {"quality_confirmed": True, "score": overall_score}
```

### 3.2 å­¦ç¿’ãƒ»æ”¹å–„ãƒ¡ã‚«ãƒ‹ã‚ºãƒ 

#### 3.2.1 ç¶™ç¶šçš„å­¦ç¿’è¨­è¨ˆ
```python
class ContinuousLearning:
    def __init__(self):
        self.interaction_history = []
        self.success_patterns = {}
        self.failure_patterns = {}
    
    def record_interaction(self, input_data, understanding, user_feedback):
        """
        ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¨˜éŒ²ã—ã€å­¦ç¿’ãƒ‡ãƒ¼ã‚¿ã¨ã—ã¦è“„ç©
        """
        interaction = {
            "timestamp": datetime.now(),
            "input": input_data,
            "understanding": understanding,
            "feedback": user_feedback,
            "success": user_feedback.get("satisfied", False)
        }
        
        self.interaction_history.append(interaction)
        self._update_patterns(interaction)
    
    def _update_patterns(self, interaction):
        """
        æˆåŠŸãƒ»å¤±æ•—ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’æ›´æ–°
        """
        if interaction["success"]:
            self._add_success_pattern(interaction)
        else:
            self._add_failure_pattern(interaction)
```

#### 3.2.2 æ–‡è„ˆè¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ 
```python
class ContextMemory:
    def __init__(self):
        self.client_contexts = {}
        self.project_contexts = {}
        self.global_context = {}
    
    def store_context(self, understanding):
        """
        ç†è§£å†…å®¹ã‚’æ–‡è„ˆã¨ã—ã¦è¨˜æ†¶
        """
        client = understanding.get("client")
        project = understanding.get("project")
        
        if client:
            self._update_client_context(client, understanding)
        
        if project:
            self._update_project_context(project, understanding)
        
        self._update_global_context(understanding)
    
    def retrieve_relevant_context(self, current_input):
        """
        ç¾åœ¨ã®å…¥åŠ›ã«é–¢é€£ã™ã‚‹æ–‡è„ˆã‚’å–å¾—
        """
        relevant_contexts = []
        
        # ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé–¢é€£æ–‡è„ˆ
        detected_client = self._detect_client(current_input)
        if detected_client and detected_client in self.client_contexts:
            relevant_contexts.append(self.client_contexts[detected_client])
        
        # ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆé–¢é€£æ–‡è„ˆ
        detected_project = self._detect_project(current_input)
        if detected_project and detected_project in self.project_contexts:
            relevant_contexts.append(self.project_contexts[detected_project])
        
        return self._merge_contexts(relevant_contexts)
```

### 3.3 å®Ÿè£…ç®¡ç†è¦é …

#### TaskMasteré€£æºç®¡ç†
```yaml
Phase 3 ç®¡ç†é …ç›®:
  - 3æ®µéšç†è§£ãƒ—ãƒ­ã‚»ã‚¹ã®å®Ÿè£…çŠ¶æ³
  - å“è³ªä¿è¨¼ã‚·ã‚¹ãƒ†ãƒ ã®å‹•ä½œç¢ºèª
  - å­¦ç¿’ãƒ¡ã‚«ãƒ‹ã‚ºãƒ ã®åŠ¹æœæ¸¬å®š
  - æ–‡è„ˆè¨˜æ†¶ã‚·ã‚¹ãƒ†ãƒ ã®ç²¾åº¦æ¤œè¨¼

å®Œäº†å®šç¾©:
  - ç†è§£ç²¾åº¦80%ä»¥ä¸Šé”æˆ
  - å“è³ªæ¤œè¨¼ã‚·ã‚¹ãƒ†ãƒ ã®è‡ªå‹•å‹•ä½œ
  - æ–‡è„ˆè¨˜æ†¶ã®æ­£å¸¸ãªè“„ç©ãƒ»å–å¾—
  - æ´å¯Ÿç”Ÿæˆã®é–¢é€£æ€§90%ä»¥ä¸Š
```

---

## ç¬¬4ç« ï¼šæƒ…å ±æ§‹é€ åŒ–ã‚·ã‚¹ãƒ†ãƒ 

### 4.1 è‡ªå‹•ä¿å­˜å…ˆæ±ºå®šã‚·ã‚¹ãƒ†ãƒ 

#### 4.1.1 ä¿å­˜å…ˆæ±ºå®šã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ 

**éšå±¤æ§‹é€ è¨­è¨ˆ**
```
MIRRALISM_OUTPUT/
â”œâ”€â”€ ğŸ“ Clients/                    # ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆ¥
â”‚   â”œâ”€â”€ ğŸ“ [ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå]/
â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Profile.md          # åŸºæœ¬æƒ…å ±ãƒ»ç‰¹å¾´
â”‚   â”‚   â”œâ”€â”€ ğŸ“ Projects/           # æ¡ˆä»¶åˆ¥
â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“ [YYYY-MM_ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå]/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Summary.md      # AIè¦ç´„
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Insights.md     # æ´å¯Ÿãƒ»åˆ†æ
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Proposal.md     # ææ¡ˆæ›¸
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ ğŸ“„ Communications.md # ã‚„ã‚Šå–ã‚Šå±¥æ­´
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ğŸ“ References/     # å‚è€ƒè³‡æ–™
â”‚   â”‚   â”œâ”€â”€ ğŸ“ Insights/           # è“„ç©ã•ã‚ŒãŸæ´å¯Ÿ
â”‚   â”‚   â””â”€â”€ ğŸ“ History/            # å…¨å±¥æ­´
â”‚
â”œâ”€â”€ ğŸ“ Personal/                   # å€‹äººé–¢é€£
â”‚   â”œâ”€â”€ ğŸ“ Ideas/                  # ã‚¢ã‚¤ãƒ‡ã‚¢ãƒ»æ€è€ƒ
â”‚   â”œâ”€â”€ ğŸ“ Learning/               # å­¦ç¿’ãƒ¡ãƒ¢
â”‚   â”œâ”€â”€ ğŸ“ Tasks/                  # å€‹äººã‚¿ã‚¹ã‚¯
â”‚   â””â”€â”€ ğŸ“ Reflections/            # æŒ¯ã‚Šè¿”ã‚Š
â”‚
â”œâ”€â”€ ğŸ“ Knowledge/                  # çŸ¥è­˜ãƒ™ãƒ¼ã‚¹
â”‚   â”œâ”€â”€ ğŸ“ Industry/               # æ¥­ç•ŒçŸ¥è­˜
â”‚   â”œâ”€â”€ ğŸ“ Technology/             # æŠ€è¡“æƒ…å ±
â”‚   â”œâ”€â”€ ğŸ“ Best_Practices/         # ãƒ™ã‚¹ãƒˆãƒ—ãƒ©ã‚¯ãƒ†ã‚£ã‚¹
â”‚   â””â”€â”€ ğŸ“ Trends/                 # ãƒˆãƒ¬ãƒ³ãƒ‰ãƒ»å‹•å‘
â”‚
â”œâ”€â”€ ğŸ“ Analytics/                  # åˆ†æãƒ»ãƒ¬ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ ğŸ“„ Weekly_Summary.md       # é€±æ¬¡ã‚µãƒãƒªãƒ¼
â”‚   â”œâ”€â”€ ğŸ“„ Monthly_Report.md       # æœˆæ¬¡ãƒ¬ãƒãƒ¼ãƒˆ
â”‚   â”œâ”€â”€ ğŸ“„ Client_Analysis.md      # ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆåˆ†æ
â”‚   â””â”€â”€ ğŸ“„ Opportunity_Map.md      # æ©Ÿä¼šãƒãƒƒãƒ—
â”‚
â””â”€â”€ ğŸ“ System/                     # ã‚·ã‚¹ãƒ†ãƒ é–¢é€£
    â”œâ”€â”€ ğŸ“„ usage.json              # ä½¿ç”¨é‡è¿½è·¡
    â”œâ”€â”€ ğŸ“„ contexts.json           # æ–‡è„ˆè¨˜æ†¶
    â””â”€â”€ ğŸ“ Backups/                # ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
```

**ä¿å­˜å…ˆæ±ºå®šãƒ­ã‚¸ãƒƒã‚¯**
```python
class OutputPathDecider:
    def __init__(self):
        self.classification_rules = {
            "client_indicators": ["æ ªå¼ä¼šç¤¾", "æœ‰é™ä¼šç¤¾", "å·¥å‹™åº—", "å»ºè¨­", "è¨­è¨ˆ"],
            "personal_indicators": ["ç§ã®", "å€‹äººçš„", "ã‚¢ã‚¤ãƒ‡ã‚¢", "å­¦ç¿’", "ãƒ¡ãƒ¢"],
            "knowledge_indicators": ["æ¥­ç•Œ", "æŠ€è¡“", "ãƒˆãƒ¬ãƒ³ãƒ‰", "æ‰‹æ³•", "çŸ¥è­˜"]
        }
    
    def decide_path(self, understanding):
        """
        ç†è§£å†…å®¹ã«åŸºã¥ã„ã¦æœ€é©ãªä¿å­˜å…ˆã‚’æ±ºå®š
        """
        # 1. ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé–¢é€£ã®åˆ¤å®š
        client = understanding.get("client")
        if client:
            return self._build_client_path(client, understanding)
        
        # 2. å€‹äººé–¢é€£ã®åˆ¤å®š
        if self._is_personal_content(understanding):
            return self._build_personal_path(understanding)
        
        # 3. çŸ¥è­˜ãƒ™ãƒ¼ã‚¹é–¢é€£ã®åˆ¤å®š
        if self._is_knowledge_content(understanding):
            return self._build_knowledge_path(understanding)
        
        # 4. ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼ˆä¸€èˆ¬ï¼‰
        return self._build_general_path(understanding)
    
    def _build_client_path(self, client, understanding):
        """
        ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆé–¢é€£ã®è©³ç´°ãƒ‘ã‚¹ã‚’æ§‹ç¯‰
        """
        base_path = Path("MIRRALISM_OUTPUT/Clients") / client
        
        project = understanding.get("project")
        if project:
            project_id = f"{datetime.now().strftime('%Y-%m')}_{project}"
            return base_path / "Projects" / project_id
        
        content_type = understanding.get("type", "general")
        return base_path / content_type.capitalize()
```

#### 4.1.2 ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿è‡ªå‹•ç”Ÿæˆ

**åŒ…æ‹¬çš„ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚¹ã‚­ãƒ¼ãƒ**
```python
class MetadataGenerator:
    def generate_metadata(self, input_text, understanding):
        """
        ç†è§£å†…å®¹ã‹ã‚‰åŒ…æ‹¬çš„ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‚’ç”Ÿæˆ
        """
        return {
            "core": {
                "id": generate_unique_id(),
                "timestamp": datetime.now().isoformat(),
                "source": "mirralism_v4",
                "version": "1.0"
            },
            
            "content": {
                "type": understanding.get("type"),
                "category": understanding.get("category"),
                "language": "ja",
                "word_count": len(input_text.split()),
                "complexity": understanding.get("complexity")
            },
            
            "entities": {
                "client": understanding.get("client"),
                "project": understanding.get("project"),
                "people": understanding.get("people", []),
                "organizations": understanding.get("organizations", []),
                "locations": understanding.get("locations", [])
            },
            
            "context": {
                "urgency": understanding.get("urgency", "normal"),
                "importance": understanding.get("importance", "medium"),
                "sentiment": understanding.get("sentiment", "neutral"),
                "confidence": understanding.get("confidence", 0.8)
            },
            
            "relationships": {
                "related_clients": self._find_related_clients(understanding),
                "related_projects": self._find_related_projects(understanding),
                "similar_content": self._find_similar_content(understanding)
            },
            
            "ai_analysis": {
                "model_used": understanding.get("model"),
                "processing_time": understanding.get("processing_time"),
                "token_count": understanding.get("token_count"),
                "insights_count": len(understanding.get("insights", []))
            }
        }
```

### 4.2 è‡ªå‹•é–¢é€£ä»˜ã‘ã‚·ã‚¹ãƒ†ãƒ 

#### 4.2.1 æ„å‘³çš„é–¢é€£æ€§æ¤œå‡º
```python
class SemanticRelationshipDetector:
    def __init__(self):
        self.similarity_threshold = 0.7
        self.relationship_types = [
            "client_related",      # åŒä¸€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
            "project_related",     # åŒä¸€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ
            "topic_similar",       # é¡ä¼¼ãƒˆãƒ”ãƒƒã‚¯
            "temporal_related",    # æ™‚ç³»åˆ—é–¢é€£
            "causal_related"       # å› æœé–¢ä¿‚
        ]
    
    async def detect_relationships(self, current_content, existing_contents):
        """
        ç¾åœ¨ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨æ—¢å­˜ã‚³ãƒ³ãƒ†ãƒ³ãƒ„é–“ã®é–¢é€£æ€§ã‚’æ¤œå‡º
        """
        relationships = []
        
        for existing in existing_contents:
            similarity = await self._calculate_semantic_similarity(
                current_content, existing
            )
            
            if similarity > self.similarity_threshold:
                relationship_type = self._classify_relationship(
                    current_content, existing, similarity
                )
                
                relationships.append({
                    "target_id": existing["id"],
                    "type": relationship_type,
                    "strength": similarity,
                    "reason": self._explain_relationship(
                        current_content, existing, relationship_type
                    )
                })
        
        return relationships
```

#### 4.2.2 å‹•çš„çŸ¥è­˜ã‚°ãƒ©ãƒ•æ§‹ç¯‰
```python
class KnowledgeGraphBuilder:
    def __init__(self):
        self.graph = {
            "nodes": {},    # ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ãƒãƒ¼ãƒ‰
            "edges": {},    # é–¢é€£æ€§ã‚¨ãƒƒã‚¸
            "clusters": {}  # æ„å‘³çš„ã‚¯ãƒ©ã‚¹ã‚¿ãƒ¼
        }
    
    def add_content_node(self, content_id, metadata, understanding):
        """
        æ–°ã—ã„ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’ãƒãƒ¼ãƒ‰ã¨ã—ã¦è¿½åŠ 
        """
        self.graph["nodes"][content_id] = {
            "metadata": metadata,
            "understanding": understanding,
            "connections": [],
            "cluster_id": None,
            "centrality": 0.0
        }
        
        # è‡ªå‹•ã‚¯ãƒ©ã‚¹ã‚¿ãƒªãƒ³ã‚°
        self._update_clusters(content_id)
    
    def create_relationship_edge(self, source_id, target_id, relationship):
        """
        é–¢é€£æ€§ã‚¨ãƒƒã‚¸ã‚’ä½œæˆ
        """
        edge_id = f"{source_id}_{target_id}"
        self.graph["edges"][edge_id] = {
            "source": source_id,
            "target": target_id,
            "type": relationship["type"],
            "strength": relationship["strength"],
            "created": datetime.now().isoformat()
        }
        
        # åŒæ–¹å‘ãƒªãƒ³ã‚¯
        self.graph["nodes"][source_id]["connections"].append(target_id)
        self.graph["nodes"][target_id]["connections"].append(source_id)
```

### 4.3 å®Ÿè£…ç®¡ç†è¦é …

#### TaskMasteré€£æºç®¡ç†
```yaml
Phase 4 ç®¡ç†é …ç›®:
  - è‡ªå‹•ä¿å­˜å…ˆæ±ºå®šã®ç²¾åº¦ç¢ºèª
  - ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆã®å®Œå…¨æ€§æ¤œè¨¼
  - é–¢é€£æ€§æ¤œå‡ºã®ç²¾åº¦æ¸¬å®š
  - çŸ¥è­˜ã‚°ãƒ©ãƒ•æ§‹ç¯‰ã®æœ‰åŠ¹æ€§ç¢ºèª

å®Œäº†å®šç¾©:
  - ä¿å­˜å…ˆæ±ºå®šç²¾åº¦90%ä»¥ä¸Š
  - ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿é …ç›®ã®ç¶²ç¾…æ€§100%
  - é–¢é€£æ€§æ¤œå‡ºç²¾åº¦80%ä»¥ä¸Š
  - çŸ¥è­˜ã‚°ãƒ©ãƒ•ã®å¯è¦–åŒ–ãƒ»æ´»ç”¨å¯èƒ½
```

---

## ç¬¬5ç« ï¼šæ®µéšçš„å®Ÿè£…æˆ¦ç•¥

### 5.1 3æ®µéšå®Ÿè£…ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

#### 5.1.1 Phase 1: åŸºç›¤æ§‹ç¯‰ï¼ˆé€±1-2ï¼‰

**å®Ÿè£…ã‚¹ã‚³ãƒ¼ãƒ—**
```yaml
æ ¸å¿ƒæ©Ÿèƒ½:
  - CLIåŸºæœ¬ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹
  - Claude APIçµ±åˆï¼ˆOpus/Sonnetåˆ‡ã‚Šæ›¿ãˆï¼‰
  - åŸºæœ¬çš„ãªã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°
  - ã‚·ãƒ³ãƒ—ãƒ«ãªã‚³ã‚¹ãƒˆè¿½è·¡
  - ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜æ©Ÿèƒ½

æˆåŠŸåŸºæº–:
  - ã‚³ãƒãƒ³ãƒ‰ãƒ©ã‚¤ãƒ³å®Ÿè¡Œã§å‹•ä½œ
  - AIç†è§£çµæœã®æ§‹é€ åŒ–å‡ºåŠ›
  - ã‚¨ãƒ©ãƒ¼æ™‚ã®ãƒ‡ãƒ¼ã‚¿ä¿å­˜
  - åŸºæœ¬çš„ãªã‚³ã‚¹ãƒˆåˆ¶é™æ©Ÿèƒ½
```

**æŠ€è¡“å®Ÿè£…ä»•æ§˜**
```python
# Phase 1 æœ€å°å®Ÿè£…ã‚¯ãƒ©ã‚¹
class MirralismBasic:
    def __init__(self):
        self.client = Anthropic(api_key=os.getenv("ANTHROPIC_API_KEY"))
        self.cost_limit = 5.0
        self.usage = 0.0
        self.output_base = Path("./MIRRALISM_OUTPUT")
    
    def process(self, input_text):
        # 1. ã‚³ã‚¹ãƒˆåˆ¶é™ãƒã‚§ãƒƒã‚¯
        # 2. Claude APIå‘¼ã³å‡ºã—
        # 3. åŸºæœ¬çš„ãªç†è§£å‡¦ç†
        # 4. ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜
        # 5. ãƒ¬ã‚¹ãƒãƒ³ã‚¹è¿”å´
        pass
```

**TaskMasterç®¡ç†é …ç›®**
```yaml
é€±1ã‚¿ã‚¹ã‚¯:
  â–¡ é–‹ç™ºç’°å¢ƒã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
  â–¡ åŸºæœ¬CLIãƒ•ãƒ¬ãƒ¼ãƒ ãƒ¯ãƒ¼ã‚¯å®Ÿè£…
  â–¡ Claude APIçµ±åˆå®Ÿè£…
  â–¡ ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å®Ÿè£…
  â–¡ åŸºæœ¬ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ

é€±2ã‚¿ã‚¹ã‚¯:
  â–¡ ã‚³ã‚¹ãƒˆè¿½è·¡æ©Ÿèƒ½å®Ÿè£…
  â–¡ ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
  â–¡ çµ±åˆãƒ†ã‚¹ãƒˆå®Ÿè¡Œ
  â–¡ Phase 1å“è³ªç¢ºèª
  â–¡ Phase 2æº–å‚™
```

#### 5.1.2 Phase 2: AIç†è§£ã‚¨ãƒ³ã‚¸ãƒ³å®Ÿè£…ï¼ˆé€±3-5ï¼‰

**å®Ÿè£…ã‚¹ã‚³ãƒ¼ãƒ—**
```yaml
è¿½åŠ æ©Ÿèƒ½:
  - æ®µéšçš„ç†è§£ãƒ—ãƒ­ã‚»ã‚¹ï¼ˆ3æ®µéšï¼‰
  - æ–‡è„ˆè§£æãƒ»åˆ¤å®šã‚·ã‚¹ãƒ†ãƒ 
  - æ´å¯Ÿç”Ÿæˆã‚¨ãƒ³ã‚¸ãƒ³
  - å“è³ªä¿è¨¼ã‚·ã‚¹ãƒ†ãƒ 
  - å‹•çš„ãƒ¢ãƒ‡ãƒ«é¸æŠ

æŠ€è¡“çš„å¼·åŒ–:
  - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆæœ€é©åŒ–
  - ãƒ¬ã‚¹ãƒãƒ³ã‚¹è§£æå¼·åŒ–
  - æ–‡è„ˆè¨˜æ†¶æ©Ÿèƒ½
  - é–¢é€£æ€§æ¤œå‡ºåŸºç¤
```

**å®Ÿè£…è©³ç´°**
```python
# Phase 2 æ‹¡å¼µã‚¯ãƒ©ã‚¹
class MirralismAdvanced(MirralismBasic):
    def __init__(self):
        super().__init__()
        self.understanding_engine = UnderstandingEngine()
        self.quality_assurance = QualityAssurance()
        self.context_memory = ContextMemory()
    
    def advanced_process(self, input_text):
        # 1. åŸºæœ¬è§£æ
        # 2. æ–‡è„ˆç†è§£
        # 3. æ´å¯Ÿç”Ÿæˆ
        # 4. å“è³ªæ¤œè¨¼
        # 5. æ§‹é€ åŒ–ä¿å­˜
        pass
```

**ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ä½“ç³»**
```python
class ErrorTypes:
    """
    MIRRALISM V4ã®ã‚¨ãƒ©ãƒ¼åˆ†é¡ä½“ç³»
    å„ã‚¨ãƒ©ãƒ¼ã«å¿œã˜ãŸé©åˆ‡ãªå¯¾å‡¦æ³•ã‚’å®šç¾©
    """
    # APIé–¢é€£ã‚¨ãƒ©ãƒ¼
    API_ERROR = "api_error"              # Claude APIä¸€èˆ¬ã‚¨ãƒ©ãƒ¼
    RATE_LIMIT = "rate_limit"            # ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚¨ãƒ©ãƒ¼
    AUTH_ERROR = "auth_error"            # èªè¨¼ã‚¨ãƒ©ãƒ¼
    MODEL_ERROR = "model_error"          # ãƒ¢ãƒ‡ãƒ«æŒ‡å®šã‚¨ãƒ©ãƒ¼
    
    # ã‚³ã‚¹ãƒˆé–¢é€£ã‚¨ãƒ©ãƒ¼
    COST_LIMIT = "cost_limit"            # ã‚³ã‚¹ãƒˆåˆ¶é™åˆ°é”
    BUDGET_WARNING = "budget_warning"     # äºˆç®—è­¦å‘Šï¼ˆ80%åˆ°é”ï¼‰
    TOKEN_LIMIT = "token_limit"          # ãƒˆãƒ¼ã‚¯ãƒ³æ•°åˆ¶é™
    
    # ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã‚¨ãƒ©ãƒ¼
    FILE_ERROR = "file_error"            # ãƒ•ã‚¡ã‚¤ãƒ«ä¿å­˜ã‚¨ãƒ©ãƒ¼
    PERMISSION_ERROR = "permission"       # æ¨©é™ã‚¨ãƒ©ãƒ¼
    DISK_SPACE = "disk_space"            # ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ä¸è¶³
    
    # å…¥åŠ›æ¤œè¨¼ã‚¨ãƒ©ãƒ¼
    VALIDATION_ERROR = "validation"       # å…¥åŠ›æ¤œè¨¼ã‚¨ãƒ©ãƒ¼
    ENCODING_ERROR = "encoding"          # æ–‡å­—ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‡ã‚£ãƒ³ã‚°ã‚¨ãƒ©ãƒ¼
    SIZE_ERROR = "size_error"            # ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™
    
    # ã‚·ã‚¹ãƒ†ãƒ ã‚¨ãƒ©ãƒ¼
    NETWORK_ERROR = "network"            # ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã‚¨ãƒ©ãƒ¼
    TIMEOUT_ERROR = "timeout"            # ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆ
    UNKNOWN_ERROR = "unknown"            # äºˆæœŸã—ãªã„ã‚¨ãƒ©ãƒ¼

class ErrorHandler:
    """
    ã‚¨ãƒ©ãƒ¼ã®ç¨®åˆ¥ã«å¿œã˜ãŸå‡¦ç†ã‚’å®Ÿè¡Œ
    """
    def __init__(self):
        self.retry_limits = {
            ErrorTypes.RATE_LIMIT: 3,      # ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã¯3å›ãƒªãƒˆãƒ©ã‚¤
            ErrorTypes.NETWORK_ERROR: 2,   # ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯ã¯2å›ãƒªãƒˆãƒ©ã‚¤
            ErrorTypes.TIMEOUT_ERROR: 2,   # ã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆã¯2å›ãƒªãƒˆãƒ©ã‚¤
            ErrorTypes.API_ERROR: 1        # APIä¸€èˆ¬ã‚¨ãƒ©ãƒ¼ã¯1å›ã®ã¿
        }
        
        self.wait_times = {
            ErrorTypes.RATE_LIMIT: [1, 2, 4],      # æŒ‡æ•°ãƒãƒƒã‚¯ã‚ªãƒ•
            ErrorTypes.NETWORK_ERROR: [0.5, 1],    # çŸ­ã„é–“éš”
            ErrorTypes.TIMEOUT_ERROR: [1, 2]       # å°‘ã—é•·ã‚
        }
    
    def handle_error(self, error_type: str, error_details: dict, attempt: int = 0):
        """
        ã‚¨ãƒ©ãƒ¼ã‚¿ã‚¤ãƒ—ã«å¿œã˜ãŸå‡¦ç†ã‚’å®Ÿè¡Œ
        
        Args:
            error_type: ErrorTypeså®šæ•°
            error_details: ã‚¨ãƒ©ãƒ¼ã®è©³ç´°æƒ…å ±
            attempt: ç¾åœ¨ã®è©¦è¡Œå›æ•°
            
        Returns:
            dict: å‡¦ç†çµæœï¼ˆãƒªãƒˆãƒ©ã‚¤è¦å¦ã€å¾…æ©Ÿæ™‚é–“ç­‰ï¼‰
        """
        if error_type == ErrorTypes.RATE_LIMIT:
            return self._handle_rate_limit(error_details, attempt)
        elif error_type == ErrorTypes.COST_LIMIT:
            return self._handle_cost_limit(error_details)
        elif error_type == ErrorTypes.FILE_ERROR:
            return self._handle_file_error(error_details)
        elif error_type == ErrorTypes.VALIDATION_ERROR:
            return self._handle_validation_error(error_details)
        else:
            return self._handle_generic_error(error_type, error_details, attempt)
    
    def _handle_rate_limit(self, details: dict, attempt: int):
        """ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã‚¨ãƒ©ãƒ¼ã®å‡¦ç†"""
        max_retries = self.retry_limits[ErrorTypes.RATE_LIMIT]
        
        if attempt < max_retries:
            wait_time = self.wait_times[ErrorTypes.RATE_LIMIT][min(attempt, 2)]
            return {
                "action": "retry",
                "wait_time": wait_time,
                "message": f"ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã«é”ã—ã¾ã—ãŸã€‚{wait_time}ç§’å¾Œã«ãƒªãƒˆãƒ©ã‚¤ã—ã¾ã™ã€‚"
            }
        else:
            return {
                "action": "fail",
                "message": "ãƒ¬ãƒ¼ãƒˆåˆ¶é™ã®ãŸã‚å‡¦ç†ã‚’åœæ­¢ã—ã¾ã—ãŸã€‚æ™‚é–“ã‚’ãŠã„ã¦å†å®Ÿè¡Œã—ã¦ãã ã•ã„ã€‚",
                "save_input": True
            }
    
    def _handle_cost_limit(self, details: dict):
        """ã‚³ã‚¹ãƒˆåˆ¶é™ã‚¨ãƒ©ãƒ¼ã®å‡¦ç†"""
        return {
            "action": "fallback",
            "message": "ã‚³ã‚¹ãƒˆåˆ¶é™ã«é”ã—ã¾ã—ãŸã€‚ã‚ˆã‚Šå®‰ä¾¡ãªãƒ¢ãƒ‡ãƒ«ã§å‡¦ç†ã‚’ç¶šè¡Œã—ã¾ã™ã€‚",
            "fallback_model": "claude-sonnet-4-20250514"
        }
    
    def _handle_file_error(self, details: dict):
        """ãƒ•ã‚¡ã‚¤ãƒ«æ“ä½œã‚¨ãƒ©ãƒ¼ã®å‡¦ç†"""
        return {
            "action": "alternative_save",
            "message": "é€šå¸¸ã®ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—å ´æ‰€ã«ä¿å­˜ã—ã¾ã™ã€‚",
            "backup_path": "./MIRRALISM_OUTPUT/backup/"
        }
    
    def _handle_validation_error(self, details: dict):
        """å…¥åŠ›æ¤œè¨¼ã‚¨ãƒ©ãƒ¼ã®å‡¦ç†"""
        return {
            "action": "sanitize",
            "message": "å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã«å•é¡ŒãŒã‚ã‚Šã¾ã™ã€‚ã‚µãƒ‹ã‚¿ã‚¤ã‚ºå¾Œã«å†å‡¦ç†ã—ã¾ã™ã€‚",
            "sanitize_input": True
        }
```

**TaskMasterç®¡ç†é …ç›®**
```yaml
é€±3ã‚¿ã‚¹ã‚¯:
  â–¡ ç†è§£ã‚¨ãƒ³ã‚¸ãƒ³åŸºç›¤å®Ÿè£…
  â–¡ 3æ®µéšè§£æãƒ—ãƒ­ã‚»ã‚¹å®Ÿè£…
  â–¡ åŸºæœ¬çš„ãªæ´å¯Ÿç”Ÿæˆæ©Ÿèƒ½

é€±4ã‚¿ã‚¹ã‚¯:
  â–¡ å“è³ªä¿è¨¼ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…
  â–¡ æ–‡è„ˆè¨˜æ†¶æ©Ÿèƒ½å®Ÿè£…
  â–¡ å‹•çš„ãƒ¢ãƒ‡ãƒ«é¸æŠå®Ÿè£…

é€±5ã‚¿ã‚¹ã‚¯:
  â–¡ çµ±åˆãƒ†ã‚¹ãƒˆãƒ»å“è³ªç¢ºèª
  â–¡ ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
  â–¡ Phase 3æº–å‚™
```

#### 5.1.3 Phase 3: é«˜åº¦åŒ–ãƒ»æœ€é©åŒ–ï¼ˆé€±6-8ï¼‰

**å®Ÿè£…ã‚¹ã‚³ãƒ¼ãƒ—**
```yaml
æœ€çµ‚æ©Ÿèƒ½:
  - è‡ªå‹•ä¿å­˜å…ˆæ±ºå®šã‚·ã‚¹ãƒ†ãƒ 
  - åŒ…æ‹¬çš„ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ç”Ÿæˆ
  - æ„å‘³çš„é–¢é€£æ€§æ¤œå‡º
  - çŸ¥è­˜ã‚°ãƒ©ãƒ•æ§‹ç¯‰
  - ç¶™ç¶šçš„å­¦ç¿’æ©Ÿèƒ½

é‹ç”¨æ©Ÿèƒ½:
  - è©³ç´°ãªã‚³ã‚¹ãƒˆæœ€é©åŒ–
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
  - ä½¿ç”¨çµ±è¨ˆãƒ»ãƒ¬ãƒãƒ¼ãƒˆæ©Ÿèƒ½
  - ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ãƒ»å¾©æ—§æ©Ÿèƒ½
```

**å®Œå…¨ç‰ˆå®Ÿè£…**
```python
# Phase 3 å®Œå…¨ç‰ˆ
class MirralismComplete(MirralismAdvanced):
    def __init__(self):
        super().__init__()
        self.path_decider = OutputPathDecider()
        self.metadata_generator = MetadataGenerator()
        self.relationship_detector = SemanticRelationshipDetector()
        self.knowledge_graph = KnowledgeGraphBuilder()
        self.learning_system = ContinuousLearning()
    
    async def complete_process(self, input_text):
        # å®Œå…¨ãªå‡¦ç†ãƒ‘ã‚¤ãƒ—ãƒ©ã‚¤ãƒ³
        pass
```

### 5.2 å“è³ªä¿è¨¼æˆ¦ç•¥

#### 5.2.1 ãƒ†ã‚¹ãƒˆæˆ¦ç•¥
```yaml
å˜ä½“ãƒ†ã‚¹ãƒˆ:
  - å„ãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«ã®ç‹¬ç«‹å‹•ä½œç¢ºèª
  - ã‚¨ãƒ©ãƒ¼ã‚±ãƒ¼ã‚¹ã®ç¶²ç¾…
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŸºæº–ã®ç¢ºèª

çµ±åˆãƒ†ã‚¹ãƒˆ:
  - ã‚¨ãƒ³ãƒ‰ãƒ„ãƒ¼ã‚¨ãƒ³ãƒ‰ãƒ•ãƒ­ãƒ¼ç¢ºèª
  - ç•°ãªã‚‹ã‚·ãƒŠãƒªã‚ªã§ã®å‹•ä½œæ¤œè¨¼
  - ãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ã®ç¢ºèª

å—å…¥ãƒ†ã‚¹ãƒˆ:
  - å®Ÿéš›ã®æ¥­å‹™ãƒ‡ãƒ¼ã‚¿ã§ã®æ¤œè¨¼
  - ãƒ¦ãƒ¼ã‚¶ãƒ“ãƒªãƒ†ã‚£ç¢ºèª
  - è¨­è¨ˆæ›¸è¦ä»¶ã®ç¶²ç¾…ç¢ºèª
```

#### 5.2.2 å“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹
```yaml
æ©Ÿèƒ½å“è³ª:
  - ç†è§£ç²¾åº¦: 80%ä»¥ä¸Š
  - æ´å¯Ÿé–¢é€£æ€§: 90%ä»¥ä¸Š
  - ä¿å­˜å…ˆæ±ºå®šç²¾åº¦: 90%ä»¥ä¸Š

éæ©Ÿèƒ½å“è³ª:
  - ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“: 95%ã®ã‚±ãƒ¼ã‚¹ã§5ç§’ä»¥å†…
  - ã‚³ã‚¹ãƒˆåŠ¹ç‡: å¾“æ¥æ¯”50%å‰Šæ¸›
  - å¯ç”¨æ€§: 99%ä»¥ä¸Š

ãƒ¦ãƒ¼ã‚¶ãƒ¼ä½“é¨“:
  - æ“ä½œã®ç›´æ„Ÿæ€§
  - ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ˜ç¢ºæ€§
  - å­¦ç¿’ãƒ»æ”¹å–„ã®å®Ÿæ„Ÿ
```

### 5.3 å®Ÿè£…ç®¡ç†è¦é …

#### TaskMasterå…¨ä½“ç®¡ç†
```yaml
å…¨Phaseç®¡ç†é …ç›®:
  - å„Phaseå®Œäº†åŸºæº–ã®ç¢ºèª
  - è¨­è¨ˆæ›¸ã‹ã‚‰ã®é€¸è„±ãƒã‚§ãƒƒã‚¯
  - å“è³ªãƒ¡ãƒˆãƒªã‚¯ã‚¹é”æˆçŠ¶æ³
  - æŠ€è¡“çš„è² å‚µã®ç®¡ç†

å®Œäº†å®šç¾©:
  - å…¨æ©Ÿèƒ½ã®æ­£å¸¸å‹•ä½œç¢ºèª
  - æ€§èƒ½è¦ä»¶ã®é”æˆ
  - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åŸºæº–ã®æº€è¶³
  - ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®å®Œå‚™
```

---

## ç¬¬6ç« ï¼šæŠ€è¡“ä»•æ§˜

### 6.1 APIè¨­è¨ˆä»•æ§˜

#### 6.1.1 å†…éƒ¨APIæ§‹é€ 
```python
# Core API Interface
class MirralismAPI:
    """
    MIRRALISM V4 æ ¸å¿ƒAPI
    """
    
    # åŸºæœ¬å‡¦ç†API
    def process_input(self, input_data: InputData) -> ProcessResult:
        """
        ãƒ¡ã‚¤ãƒ³å‡¦ç†API
        
        Args:
            input_data: å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ï¼ˆãƒ†ã‚­ã‚¹ãƒˆã€ãƒ•ã‚¡ã‚¤ãƒ«ã€URLï¼‰
        
        Returns:
            ProcessResult: å‡¦ç†çµæœï¼ˆç†è§£ã€æ´å¯Ÿã€ä¿å­˜å…ˆç­‰ï¼‰
        """
        pass
    
    # ç†è§£ã‚¨ãƒ³ã‚¸ãƒ³API
    def understand_content(self, content: str, context: dict = None) -> Understanding:
        """
        ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ç†è§£API
        """
        pass
    
    # æ´å¯Ÿç”ŸæˆAPI
    def generate_insights(self, understanding: Understanding) -> List[Insight]:
        """
        æ´å¯Ÿç”ŸæˆAPI
        """
        pass
    
    # æƒ…å ±æ¤œç´¢API
    def search_knowledge(self, query: str, filters: dict = None) -> SearchResults:
        """
        çŸ¥è­˜ãƒ™ãƒ¼ã‚¹æ¤œç´¢API
        """
        pass
    
    # é–¢é€£æ€§æ¤œå‡ºAPI
    def find_relationships(self, content_id: str) -> List[Relationship]:
        """
        é–¢é€£æ€§æ¤œå‡ºAPI
        """
        pass
```

#### 6.1.2 ãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«ä»•æ§˜
```python
# æ ¸å¿ƒãƒ‡ãƒ¼ã‚¿ãƒ¢ãƒ‡ãƒ«
@dataclass
class InputData:
    content: str
    source_type: str  # "text", "file", "url"
    metadata: Optional[dict] = None
    timestamp: datetime = field(default_factory=datetime.now)

@dataclass
class Understanding:
    content_id: str
    summary: str
    entities: List[Entity]
    context: Context
    complexity: float
    confidence: float
    insights: List[str]
    
@dataclass
class Entity:
    name: str
    type: str  # "client", "project", "person", "organization"
    confidence: float
    attributes: dict

@dataclass
class Context:
    client: Optional[str]
    project: Optional[str]
    urgency: str
    importance: str
    sentiment: str
    related_contexts: List[str]

@dataclass
class ProcessResult:
    success: bool
    understanding: Understanding
    output_path: Path
    insights: List[Insight]
    cost_info: CostInfo
    relationships: List[Relationship]
    
@dataclass
class CostInfo:
    model_used: str
    input_tokens: int
    output_tokens: int
    estimated_cost: float
    monthly_usage: float
```

### 6.2 ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ä»•æ§˜

#### 6.2.1 ãƒ‡ãƒ¼ã‚¿ä¿è­·
```yaml
æš—å·åŒ–:
  ä¿å­˜æ™‚: AES-256æš—å·åŒ–
  è»¢é€æ™‚: TLS 1.3
  APIé€šä¿¡: HTTPSå¿…é ˆ

ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡:
  èªè¨¼: API Key based
  èªå¯: ãƒ­ãƒ¼ãƒ«ãƒ™ãƒ¼ã‚¹ã‚¢ã‚¯ã‚»ã‚¹åˆ¶å¾¡
  ç›£æŸ»: å…¨ã‚¢ã‚¯ã‚»ã‚¹ãƒ­ã‚°è¨˜éŒ²

ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼:
  ãƒ‡ãƒ¼ã‚¿ãƒ­ãƒ¼ã‚«ãƒ«åŒ–: å¯èƒ½ãªé™ã‚Šãƒ­ãƒ¼ã‚«ãƒ«å‡¦ç†
  PIIæ¤œå‡º: å€‹äººæƒ…å ±ã®è‡ªå‹•ãƒã‚¹ã‚­ãƒ³ã‚°
  GDPRæº–æ‹ : ãƒ‡ãƒ¼ã‚¿å‰Šé™¤æ¨©ã®å®Ÿè£…
```

#### 6.2.2 API ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
```python
# ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢
class SecurityMiddleware:
    def __init__(self):
        self.rate_limiter = RateLimiter(max_requests=100, time_window=3600)
        self.input_validator = InputValidator()
        self.output_sanitizer = OutputSanitizer()
    
    def validate_input(self, input_data):
        """
        å…¥åŠ›ãƒ‡ãƒ¼ã‚¿ã®æ¤œè¨¼
        - SQLã‚¤ãƒ³ã‚¸ã‚§ã‚¯ã‚·ãƒ§ãƒ³æ¤œå‡º
        - XSSé˜²æ­¢
        - ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—åˆ¶é™
        - ã‚µã‚¤ã‚ºåˆ¶é™
        """
        pass
    
    def sanitize_output(self, output_data):
        """
        å‡ºåŠ›ãƒ‡ãƒ¼ã‚¿ã®ã‚µãƒ‹ã‚¿ã‚¤ã‚º
        - å€‹äººæƒ…å ±ãƒã‚¹ã‚­ãƒ³ã‚°
        - æ©Ÿå¯†æƒ…å ±é™¤å»
        - å®‰å…¨ãªãƒ•ã‚¡ã‚¤ãƒ«å‡ºåŠ›
        """
        pass
```

### 6.3 ã‚¹ã‚±ãƒ¼ãƒ©ãƒ“ãƒªãƒ†ã‚£è¨­è¨ˆ

#### 6.3.1 ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–
```yaml
å‡¦ç†æœ€é©åŒ–:
  - ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚­ãƒ£ãƒƒã‚·ãƒ³ã‚°å®Ÿè£…
  - ãƒãƒƒãƒå‡¦ç†å¯¾å¿œ
  - ä¸¦åˆ—å‡¦ç†ã®æ´»ç”¨
  - ãƒ¡ãƒ¢ãƒªåŠ¹ç‡çš„ãªå®Ÿè£…

ãƒ‡ãƒ¼ã‚¿æœ€é©åŒ–:
  - ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹æœ€é©åŒ–
  - åœ§ç¸®ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ æ´»ç”¨
  - ä¸è¦ãƒ‡ãƒ¼ã‚¿ã®è‡ªå‹•å‰Šé™¤
  - ã‚­ãƒ£ãƒƒã‚·ãƒ¥æˆ¦ç•¥

APIæœ€é©åŒ–:
  - ãƒ¬ã‚¹ãƒãƒ³ã‚¹åœ§ç¸®
  - é©åˆ‡ãªã‚¿ã‚¤ãƒ ã‚¢ã‚¦ãƒˆè¨­å®š
  - æ¥ç¶šãƒ—ãƒ¼ãƒ«ç®¡ç†
  - ã‚¨ãƒ©ãƒ¼ç‡ç›£è¦–
```

#### 6.3.2 æ‹¡å¼µæ€§è¨­è¨ˆ
```python
# ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
class PluginManager:
    def __init__(self):
        self.plugins = {}
        self.hooks = {
            "pre_process": [],
            "post_process": [],
            "pre_understand": [],
            "post_understand": []
        }
    
    def register_plugin(self, plugin_name: str, plugin_instance):
        """
        æ–°ã—ã„ãƒ—ãƒ©ã‚°ã‚¤ãƒ³ã‚’ç™»éŒ²
        """
        self.plugins[plugin_name] = plugin_instance
        
        # ãƒ•ãƒƒã‚¯ç™»éŒ²
        for hook_name in plugin_instance.supported_hooks:
            self.hooks[hook_name].append(plugin_instance)
    
    def execute_hook(self, hook_name: str, data):
        """
        æŒ‡å®šã•ã‚ŒãŸãƒ•ãƒƒã‚¯ã‚’å®Ÿè¡Œ
        """
        for plugin in self.hooks.get(hook_name, []):
            data = plugin.execute_hook(hook_name, data)
        return data
```

### 6.4 ç›£è¦–ãƒ»é‹ç”¨ä»•æ§˜

#### 6.4.1 æ—¥ä»˜ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ï¼ˆç¶™æ‰¿ãƒ»å¼·åŒ–ï¼‰

**ãªãœæ—¥ä»˜ç®¡ç†ãŒé‡è¦ã‹**
```yaml
é‡è¦æ€§:
  æ—¢å­˜è³‡ç”£æ´»ç”¨:
    - éå»ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã§åŸ¹ã£ãŸæ—¥ä»˜å‡¦ç†ãƒã‚¦ãƒã‚¦ã®ç¶™æ‰¿
    - cleanup_tmpç­‰ã®å®Ÿè¨¼æ¸ˆã¿æ©Ÿèƒ½ã®å†åˆ©ç”¨
    - å®‰å®šæ€§ã¨ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®ç¢ºä¿
    
  ã‚·ã‚¹ãƒ†ãƒ é‹ç”¨:
    - ãƒ•ã‚¡ã‚¤ãƒ«æ•´ç†ã®è‡ªå‹•åŒ–ï¼ˆãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ç®¡ç†ï¼‰
    - ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã®ä¸€è²«æ€§ç¢ºä¿ï¼ˆãƒ‡ãƒ¼ã‚¿æ•´åˆæ€§ï¼‰
    - ç›£æŸ»è¨¼è·¡ã®ç¶­æŒï¼ˆå¤‰æ›´å±¥æ­´è¿½è·¡ï¼‰
    
  AIä¸»å°å‹ã¸ã®é©å¿œ:
    - å¤§é‡ãƒ‡ãƒ¼ã‚¿å‡¦ç†ã§ã®æ—¥ä»˜åŸºæº–ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
    - æ™‚ç³»åˆ—åˆ†æã«ã‚ˆã‚‹æ´å¯Ÿå“è³ªå‘ä¸Š
    - æ–‡è„ˆè¨˜æ†¶ã§ã®æ™‚é–“è»¸é‡è¦åº¦åˆ¤å®š
```

**æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰ã®ç¶™æ‰¿æ©Ÿèƒ½**
```python
# æ—¢å­˜file_manager.pyã‹ã‚‰ç¶™æ‰¿
class DateTimeManager:
    """
    V4ã§å¼·åŒ–ã•ã‚ŒãŸæ—¥ä»˜ç®¡ç†ã‚·ã‚¹ãƒ†ãƒ 
    æ—¢å­˜ã®cleanup_tmpæ©Ÿèƒ½ã‚’ç¶™æ‰¿ãƒ»æ‹¡å¼µ
    """
    def __init__(self):
        self.timezone = "Asia/Tokyo"
        self.format_standard = "%Y-%m-%d %H:%M:%S"
        self.format_file = "%Y%m%d_%H%M%S"
        
    def generate_timestamp(self):
        """çµ±ä¸€ãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆã§ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ç”Ÿæˆ"""
        return datetime.now().strftime(self.format_standard)
        
    def generate_file_timestamp(self):
        """ãƒ•ã‚¡ã‚¤ãƒ«åç”¨ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—"""
        return datetime.now().strftime(self.format_file)
    
    def cleanup_old_files(self, base_path: Path, days: int = 30):
        """
        æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã®cleanup_tmpæ©Ÿèƒ½ã‚’å¼·åŒ–
        - ã‚ˆã‚ŠæŸ”è»ŸãªæœŸé–“è¨­å®š
        - ãƒ­ã‚°å‡ºåŠ›ã®æ”¹å–„
        - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°å¼·åŒ–
        """
        if not base_path.exists():
            return
            
        cutoff = datetime.now() - timedelta(days=days)
        cleaned = 0
        
        for item in base_path.iterdir():
            try:
                if item.stat().st_mtime < cutoff.timestamp():
                    if item.is_dir():
                        shutil.rmtree(item)
                    else:
                        item.unlink()
                    cleaned += 1
            except Exception as e:
                print(f"è­¦å‘Š: {item} ã®å‰Šé™¤ã«å¤±æ•—: {e}")
                
        print(f"âœ“ {cleaned}å€‹ã®ãƒ•ã‚¡ã‚¤ãƒ«/ãƒ•ã‚©ãƒ«ãƒ€ã‚’æ•´ç†")
        
    def validate_date_consistency(self, file_paths: List[Path]):
        """
        ãƒ•ã‚¡ã‚¤ãƒ«é–“ã®æ—¥ä»˜æ•´åˆæ€§ãƒã‚§ãƒƒã‚¯ï¼ˆæ–°æ©Ÿèƒ½ï¼‰
        - ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®æ—¥ä»˜ã¨ãƒ•ã‚¡ã‚¤ãƒ«ä½œæˆæ—¥æ™‚ã®æ•´åˆæ€§
        - ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã®å½¢å¼çµ±ä¸€ãƒã‚§ãƒƒã‚¯
        """
        inconsistencies = []
        
        for path in file_paths:
            if not path.exists():
                continue
                
            try:
                # ãƒ•ã‚¡ã‚¤ãƒ«å†…ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æ—¥ä»˜ã‚’æŠ½å‡º
                metadata_date = self._extract_metadata_date(path)
                file_date = datetime.fromtimestamp(path.stat().st_mtime)
                
                # 1æ™‚é–“ä»¥ä¸Šã®å·®ãŒã‚ã‚Œã°ä¸æ•´åˆã¨ã¿ãªã™
                if abs((metadata_date - file_date).total_seconds()) > 3600:
                    inconsistencies.append({
                        "file": str(path),
                        "metadata_date": metadata_date,
                        "file_date": file_date
                    })
                    
            except Exception as e:
                print(f"è­¦å‘Š: {path} ã®æ—¥ä»˜ãƒã‚§ãƒƒã‚¯ã«å¤±æ•—: {e}")
                
        return inconsistencies
        
    def _extract_metadata_date(self, file_path: Path):
        """ãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã®æ—¥ä»˜ã‚’æŠ½å‡º"""
        # JSONå½¢å¼ã®ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿ã‹ã‚‰æ—¥ä»˜ã‚’æŠ½å‡º
        # å®Ÿè£…ã¯å…·ä½“çš„ãªãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿å½¢å¼ã«ä¾å­˜
        pass
```

#### 6.4.2 ãƒ­ã‚°ãƒ»ç›£è¦–
```python
# ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ 
class LoggingSystem:
    def __init__(self):
        self.loggers = {
            "application": self._setup_app_logger(),
            "performance": self._setup_perf_logger(),
            "security": self._setup_security_logger(),
            "cost": self._setup_cost_logger()
        }
    
    def log_processing(self, input_data, result, performance_metrics):
        """
        å‡¦ç†ãƒ­ã‚°ã®è¨˜éŒ²
        """
        log_entry = {
            "timestamp": datetime.now().isoformat(),
            "input_hash": hashlib.sha256(input_data.encode()).hexdigest(),
            "processing_time": performance_metrics["duration"],
            "model_used": result.cost_info.model_used,
            "success": result.success,
            "cost": result.cost_info.estimated_cost
        }
        
        self.loggers["application"].info(json.dumps(log_entry))
```

#### 6.4.2 ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
```python
# ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
class HealthChecker:
    def __init__(self):
        self.checks = [
            self._check_api_connectivity,
            self._check_file_system,
            self._check_memory_usage,
            self._check_cost_limits
        ]
    
    async def run_health_check(self):
        """
        åŒ…æ‹¬çš„ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯å®Ÿè¡Œ
        """
        results = {}
        
        for check in self.checks:
            try:
                results[check.__name__] = await check()
            except Exception as e:
                results[check.__name__] = {"status": "error", "error": str(e)}
        
        overall_status = "healthy" if all(
            result.get("status") == "ok" for result in results.values()
        ) else "degraded"
        
        return {
            "overall_status": overall_status,
            "details": results,
            "timestamp": datetime.now().isoformat()
        }
```

### 6.5 å®Ÿè£…ç®¡ç†è¦é …

#### TaskMasteré€£æºç®¡ç†
```yaml
Phase 6 ç®¡ç†é …ç›®:
  - APIè¨­è¨ˆã®å®Ÿè£…çŠ¶æ³ç¢ºèª
  - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£æ©Ÿèƒ½ã®å‹•ä½œæ¤œè¨¼
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶é”æˆç¢ºèª
  - é‹ç”¨æ©Ÿèƒ½ã®æ•´å‚™çŠ¶æ³ç¢ºèª

å®Œäº†å®šç¾©:
  - å…¨APIä»•æ§˜ã®å®Ÿè£…å®Œäº†
  - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£ãƒ†ã‚¹ãƒˆé€šé
  - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹åŸºæº–é”æˆ
  - é‹ç”¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå®Œå‚™
  - æœ¬ç•ªç’°å¢ƒã§ã®å®‰å®šå‹•ä½œç¢ºèª
```

---

## ğŸ“‹ å®Ÿè£…ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£ãƒãƒˆãƒªã‚¯ã‚¹

### TaskMasteré€£æºç®¡ç†ã®å…¨ä½“åƒ

| Phase | ä¸»è¦æ©Ÿèƒ½ | å®Œäº†åŸºæº– | æ¤œè¨¼æ–¹æ³• | TaskMasterç®¡ç†ID |
|-------|---------|----------|----------|------------------|
| 1 | åŸºç›¤æ§‹ç¯‰ | CLIå‹•ä½œã€ã‚³ã‚¹ãƒˆåˆ¶é™ | æ‰‹å‹•ãƒ†ã‚¹ãƒˆ | MIRR-P1-001ã€œ010 |
| 2 | AIç†è§£ã‚¨ãƒ³ã‚¸ãƒ³ | ç†è§£ç²¾åº¦80%ä»¥ä¸Š | è‡ªå‹•ãƒ†ã‚¹ãƒˆ | MIRR-P2-001ã€œ015 |
| 3 | é«˜åº¦åŒ–ãƒ»æœ€é©åŒ– | å…¨æ©Ÿèƒ½çµ±åˆå‹•ä½œ | çµ±åˆãƒ†ã‚¹ãƒˆ | MIRR-P3-001ã€œ020 |

### å“è³ªã‚²ãƒ¼ãƒˆå®šç¾©

```yaml
å„Phaseå®Œäº†æ™‚ã®å“è³ªã‚²ãƒ¼ãƒˆ:
  Phase 1:
    - åŸºæœ¬æ©Ÿèƒ½100%å‹•ä½œ
    - ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°ç¶²ç¾…ç‡90%ä»¥ä¸Š
    - ã‚³ã‚¹ãƒˆåˆ¶é™æ©Ÿèƒ½æ­£å¸¸å‹•ä½œ
    
  Phase 2:
    - AIç†è§£ç²¾åº¦80%ä»¥ä¸Š
    - æ´å¯Ÿé–¢é€£æ€§90%ä»¥ä¸Š
    - ãƒ¬ã‚¹ãƒãƒ³ã‚¹æ™‚é–“5ç§’ä»¥å†…
    
  Phase 3:
    - å…¨æ©Ÿèƒ½çµ±åˆå‹•ä½œç¢ºèª
    - ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶é”æˆ
    - ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£åŸºæº–æº€è¶³
```

---

## ğŸ¯ ã¾ã¨ã‚

æœ¬è¨­è¨ˆæ›¸ã¯ã€MIRRALISM V4ã‚’AIä¸»å°å‹æƒ…å ±ç†è§£ã‚·ã‚¹ãƒ†ãƒ ã¨ã—ã¦å®Œå…¨ã«å†è¨­è¨ˆã—ãŸã‚‚ã®ã§ã™ã€‚

### æ ¸å¿ƒä¾¡å€¤
1. **ç†è§£ä¸­å¿ƒ**: æƒ…å ±ã‚’æ•´ç†ã§ã¯ãªãç†è§£
2. **æ´å¯Ÿç”Ÿæˆ**: AIãŒèƒ½å‹•çš„ã«ä¾¡å€¤ã‚ã‚‹æ´å¯Ÿã‚’æä¾›
3. **é©å¿œå­¦ç¿’**: ä½¿ç”¨ãƒ‘ã‚¿ãƒ¼ãƒ³ã«å¿œã˜ãŸç¶™ç¶šçš„æ”¹å–„
4. **ã‚³ã‚¹ãƒˆæœ€é©åŒ–**: åŠ¹æœçš„ãªãƒ¢ãƒ‡ãƒ«åˆ‡ã‚Šæ›¿ãˆã«ã‚ˆã‚‹çµŒæ¸ˆæ€§

### æŠ€è¡“çš„ç‰¹å¾´
1. **Claude Codeçµ±åˆ**: é–‹ç™ºç’°å¢ƒã¨ã®å®Œå…¨çµ±åˆ
2. **å‹•çš„ãƒ¢ãƒ‡ãƒ«é¸æŠ**: ã‚¿ã‚¹ã‚¯ã«å¿œã˜ãŸOpus/Sonnetåˆ‡ã‚Šæ›¿ãˆ
3. **ç¾å®Ÿçš„å®Ÿè£…**: æŠ€è¡“çš„ã«æ­£ç¢ºã§å®Ÿè£…å¯èƒ½ãªè¨­è¨ˆ
4. **æ®µéšçš„æ§‹ç¯‰**: 3æ®µéšã®ãƒªã‚¹ã‚¯æœ€å°åŒ–ã‚¢ãƒ—ãƒ­ãƒ¼ãƒ

### ç®¡ç†ä½“åˆ¶
- **TaskMasterçµ±åˆ**: è¨­è¨ˆæ›¸ã®å®Ÿè£…ç®¡ç†
- **å“è³ªä¿è¨¼**: å„æ®µéšã§ã®å“è³ªã‚²ãƒ¼ãƒˆ
- **ãƒˆãƒ¬ãƒ¼ã‚µãƒ“ãƒªãƒ†ã‚£**: è¨­è¨ˆã‹ã‚‰å®Ÿè£…ã¾ã§ã®å®Œå…¨ãªè¿½è·¡

**ã“ã®è¨­è¨ˆæ›¸ã«åŸºã¥ãã€ç¢ºå®Ÿã«å‹•ä½œã™ã‚‹MIRRALISM V4ã®å®Ÿè£…ãŒå¯èƒ½ã§ã™ã€‚**

---

*æ–‡æ›¸çµ‚äº†*