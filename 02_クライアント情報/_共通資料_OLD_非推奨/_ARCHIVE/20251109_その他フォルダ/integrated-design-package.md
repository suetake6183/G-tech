# äººé–“é–¢ä¿‚åˆ†æã‚·ã‚¹ãƒ†ãƒ çµ±åˆè¨­è¨ˆæ›¸ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸

ã“ã®ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã«ã¯ã€ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã‚’æˆåŠŸã«å°ããŸã‚ã«å¿…è¦ãªã™ã¹ã¦ã®è¨­è¨ˆãŒå«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

## ç›®æ¬¡
1. ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦
2. ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆ  
3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ
4. å®Ÿè£…é †åºã¨å„ªå…ˆåº¦
5. å„æ©Ÿèƒ½ã®è©³ç´°è¨­è¨ˆ
6. ã‚³ãƒ¼ãƒ‰ä¾‹ã¨ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹
7. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

---

## 1. ã‚·ã‚¹ãƒ†ãƒ æ¦‚è¦

### ç›®çš„
æœ«æ­¦ã•ã‚“ã®è­°äº‹éŒ²ã‚„æ€è€ƒãƒ¡ãƒ¢ã‚’LLMãŒè‡ªå¾‹çš„ã«åˆ†æã—ã€äººé–“é–¢ä¿‚ã®æ´å¯Ÿã‚’æä¾›ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ 

### é‡è¦ãªåˆ¶ç´„
- **APIã¯ä½¿ã‚ãªã„**ï¼ˆClaude Codeå†…ã§ç›´æ¥åˆ†æï¼‰
- **éã‚¨ãƒ³ã‚¸ãƒ‹ã‚¢å‘ã‘**ï¼ˆã‚¨ãƒ©ãƒ¼ã¯æ—¥æœ¬èªã€æ“ä½œã¯ç°¡å˜ï¼‰
- **æ®µéšçš„å®Ÿè£…**ï¼ˆ1æ—¥1æ©Ÿèƒ½ï¼‰

### ã‚·ã‚¹ãƒ†ãƒ ã®æµã‚Œ
1. inputãƒ•ã‚©ãƒ«ãƒ€ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’é…ç½®
2. AIãŒãƒ•ã‚¡ã‚¤ãƒ«ç¨®é¡ã‚’è‡ªå‹•åˆ¤åˆ¥
3. åˆ†ææ–¹æ³•ã‚’AIãŒææ¡ˆ
4. ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒæ‰¿èª/ä¿®æ­£
5. åˆ†æå®Ÿè¡Œãƒ»çµæœä¿å­˜
6. ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã§å­¦ç¿’
7. ãƒ•ã‚¡ã‚¤ãƒ«ã‚’è‡ªå‹•ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–

---

## 2. ãƒ•ã‚©ãƒ«ãƒ€æ§‹æˆ

```
project-root/
â”œâ”€â”€ input/               # åˆ†æå¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆç›´æ¥é…ç½®ï¼‰
â”œâ”€â”€ archive/             # åˆ†ææ¸ˆã¿ãƒ•ã‚¡ã‚¤ãƒ«ã®ä¿ç®¡
â”‚   â”œâ”€â”€ 2025/
â”‚   â”‚   â””â”€â”€ 06/
â”‚   â””â”€â”€ index.db
â”œâ”€â”€ output/              
â”‚   â”œâ”€â”€ analysis/        # åˆ†æçµæœ
â”‚   â”œâ”€â”€ profiles/        
â”‚   â”‚   â”œâ”€â”€ suetake/     # æœ«æ­¦ã•ã‚“å°‚ç”¨
â”‚   â”‚   â””â”€â”€ clients/     
â”‚   â””â”€â”€ insights/        
â”œâ”€â”€ database/            
â”‚   â”œâ”€â”€ learning.db      
â”‚   â”œâ”€â”€ profiles.db      
â”‚   â””â”€â”€ archive-index.db 
â”œâ”€â”€ scripts/             
â”‚   â”œâ”€â”€ analyze.js       
â”‚   â”œâ”€â”€ profile.js       
â”‚   â”œâ”€â”€ feedback.js      
â”‚   â”œâ”€â”€ archive.js       
â”‚   â””â”€â”€ db-setup.js      
â”œâ”€â”€ config.json          # è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ package.json         
â””â”€â”€ README.md            
```

---

## 3. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹è¨­è¨ˆ

### 3.1 learning.db

```sql
-- åˆ†æãƒ‘ã‚¿ãƒ¼ãƒ³ã®å­¦ç¿’
CREATE TABLE learning_patterns (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    pattern_description TEXT NOT NULL,
    pattern_details TEXT,
    success_count INTEGER DEFAULT 1,
    context TEXT,
    last_used TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯å±¥æ­´
CREATE TABLE feedback_history (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    original_method TEXT NOT NULL,
    user_feedback TEXT NOT NULL,
    improved_method TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- åˆ†æçµæœã¸ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
CREATE TABLE analysis_results_feedback (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    analysis_id TEXT NOT NULL,
    result_section TEXT,
    original_conclusion TEXT,
    user_feedback TEXT,
    corrected_conclusion TEXT,
    feedback_type TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);
```

### 3.2 profiles.db

```sql
CREATE TABLE persons (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL UNIQUE,
    role TEXT,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE personality_traits (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    person_id INTEGER,
    trait_type TEXT,
    trait_description TEXT,
    confidence_score REAL DEFAULT 0.5,
    observed_count INTEGER DEFAULT 1,
    last_observed TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (person_id) REFERENCES persons(id)
);
```

### 3.3 archive-index.db

```sql
CREATE TABLE archive_index (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    original_filename TEXT NOT NULL,
    archived_path TEXT NOT NULL,
    file_type TEXT,
    analysis_id TEXT,
    content_summary TEXT,
    archived_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    year INTEGER,
    month INTEGER
);
```

---

## 4. å®Ÿè£…é †åºã¨å„ªå…ˆåº¦

### Week 1: åŸºæœ¬æ©Ÿèƒ½
1. **Day 1**: ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåˆæœŸåŒ–
   - ãƒ•ã‚©ãƒ«ãƒ€æ§‹é€ ä½œæˆ
   - npm install
   - DBåˆæœŸåŒ–

2. **Day 2-3**: ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿
   - scripts/analyze.js ã®åŸºæœ¬éƒ¨åˆ†
   - ãƒ•ã‚¡ã‚¤ãƒ«ç¨®åˆ¥ã®è‡ªå‹•åˆ¤å®š

3. **Day 4-5**: åˆ†æå®Ÿè¡Œ
   - åŸºæœ¬çš„ãªåˆ†ææ©Ÿèƒ½
   - çµæœã®ä¿å­˜

### Week 2: å­¦ç¿’æ©Ÿèƒ½
1. **Day 6-7**: ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ©Ÿèƒ½
   - åˆ†ææ–¹æ³•ã®ææ¡ˆ
   - ãƒ¦ãƒ¼ã‚¶ãƒ¼æ‰¿èª/ä¿®æ­£

2. **Day 8-9**: å­¦ç¿’ã®å®Ÿè£…
   - DBã¸ã®ä¿å­˜
   - æ¬¡å›ã¸ã®åæ˜ 

### Week 3: é«˜åº¦ãªæ©Ÿèƒ½
1. **Day 10-12**: ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«
   - æœ«æ­¦ã•ã‚“ã®ç‰¹å¾´æŠ½å‡º
   - ãƒ—ãƒ­ãƒ•ã‚¡ã‚¤ãƒ«æ›´æ–°

2. **Day 13-14**: ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
   - è‡ªå‹•ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–
   - æ¤œç´¢æ©Ÿèƒ½

---

## 5. å„æ©Ÿèƒ½ã®è©³ç´°è¨­è¨ˆ

### 5.1 ãƒ•ã‚¡ã‚¤ãƒ«ç¨®åˆ¥åˆ¤å®šï¼ˆanalyze.jsï¼‰

```javascript
async function detectContentType(content) {
    // ã‚­ãƒ¼ãƒ¯ãƒ¼ãƒ‰ãƒ™ãƒ¼ã‚¹ã®åˆ¤å®š
    const keywords = {
        meeting: ['ä¼šè­°', 'è­°äº‹éŒ²', 'æ§˜ï¼š', 'å‚åŠ è€…'],
        personal: ['æ€ã†', 'è€ƒãˆã‚‹', 'æ°—ã¥ã'],
        proposal: ['ææ¡ˆ', 'ã”æ¤œè¨', 'è¦‹ç©']
    };
    
    // ã‚¹ã‚³ã‚¢ãƒªãƒ³ã‚°
    let scores = { meeting: 0, personal: 0, proposal: 0 };
    
    for (const [type, words] of Object.entries(keywords)) {
        words.forEach(word => {
            if (content.includes(word)) scores[type]++;
        });
    }
    
    // æœ€é«˜ã‚¹ã‚³ã‚¢ã®ã‚¿ã‚¤ãƒ—ã‚’è¿”ã™
    return Object.entries(scores)
        .sort(([,a], [,b]) => b - a)[0][0];
}
```

### 5.2 åˆ†æææ¡ˆæ©Ÿèƒ½

```javascript
async function proposeAnalysisMethod(content, fileType) {
    console.log('\nã€åˆ†ææ–¹æ³•ã®ææ¡ˆã€‘');
    
    // éå»ã®æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’å–å¾—
    const patterns = await getSuccessfulPatterns(fileType);
    
    if (patterns.length > 0) {
        console.log('éå»ã®æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³ã‹ã‚‰ï¼š');
        console.log(patterns[0].pattern_description);
    } else {
        // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã®ææ¡ˆ
        const defaults = {
            meeting: '1. è©±é¡Œã®åˆ†é¡\n2. é–¢ä¿‚æ€§åˆ†æ\n3. ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚¢ã‚¤ãƒ†ãƒ ',
            personal: '1. æ€è€ƒã®æ•´ç†\n2. æ°—ã¥ãã®æŠ½å‡º\n3. æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³',
            proposal: '1. è¦ä»¶æ•´ç†\n2. ãƒªã‚¹ã‚¯åˆ†æ\n3. ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«'
        };
        console.log(defaults[fileType]);
    }
    
    console.log('\nã“ã®æ–¹æ³•ã§åˆ†æã—ã¦ã‚ˆã‚ã—ã„ã§ã™ã‹ï¼Ÿ (y/n/ä¿®æ­£å†…å®¹)');
}
```

### 5.3 å­¦ç¿’æ©Ÿèƒ½

```javascript
async function learnFromFeedback(originalMethod, feedback, wasApproved) {
    const db = await connectDB();
    
    if (wasApproved) {
        // æˆåŠŸãƒ‘ã‚¿ãƒ¼ãƒ³ã¨ã—ã¦è¨˜éŒ²
        await db.run(
            'INSERT INTO learning_patterns (pattern_description) VALUES (?)',
            [originalMethod]
        );
    } else {
        // ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’è¨˜éŒ²
        await db.run(
            'INSERT INTO feedback_history (original_method, user_feedback) VALUES (?, ?)',
            [originalMethod, feedback]
        );
    }
}
```

### 5.4 ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–æ©Ÿèƒ½

```javascript
async function archiveFile(filePath, analysisId) {
    const now = new Date();
    const archivePath = `archive/${now.getFullYear()}/${String(now.getMonth()+1).padStart(2,'0')}/`;
    
    // ãƒ•ã‚©ãƒ«ãƒ€ä½œæˆ
    await fs.mkdir(archivePath, { recursive: true });
    
    // ãƒ•ã‚¡ã‚¤ãƒ«ç§»å‹•
    const filename = path.basename(filePath);
    await fs.rename(filePath, path.join(archivePath, filename));
    
    console.log(`âœ“ ã‚¢ãƒ¼ã‚«ã‚¤ãƒ–å®Œäº†: ${archivePath}${filename}`);
}
```

---

## 6. ã‚³ãƒ¼ãƒ‰ä¾‹ã¨ãƒ†ã‚¹ãƒˆã‚±ãƒ¼ã‚¹

### 6.1 db-setup.jsï¼ˆæœ€åˆã«å®Ÿè¡Œï¼‰

```javascript
const sqlite3 = require('sqlite3');
const { open } = require('sqlite');

async function setupDatabases() {
    console.log('ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚’åˆæœŸåŒ–ä¸­...');
    
    // learning.db
    const learningDb = await open({
        filename: './database/learning.db',
        driver: sqlite3.Database
    });
    
    await learningDb.exec(`
        CREATE TABLE IF NOT EXISTS learning_patterns (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            pattern_description TEXT NOT NULL,
            pattern_details TEXT,
            success_count INTEGER DEFAULT 1,
            context TEXT,
            last_used TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        );
        
        CREATE TABLE IF NOT EXISTS feedback_history (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            original_method TEXT NOT NULL,
            user_feedback TEXT NOT NULL,
            improved_method TEXT,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        );
    `);
    
    console.log('âœ“ learning.db ä½œæˆå®Œäº†');
    
    // ä»–ã®DBã‚‚åŒæ§˜ã«ä½œæˆ...
    
    console.log('ã™ã¹ã¦ã®ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã®åˆæœŸåŒ–ãŒå®Œäº†ã—ã¾ã—ãŸï¼');
}

setupDatabases().catch(console.error);
```

### 6.2 ãƒ†ã‚¹ãƒˆç”¨ã‚µãƒ³ãƒ—ãƒ«ãƒ•ã‚¡ã‚¤ãƒ«

**input/test-meeting.txt**
```
æ—¥æ™‚ï¼š2025å¹´6æœˆ16æ—¥ 14:00-15:00
å‚åŠ è€…ï¼šæœ«æ­¦æ§˜ã€Aç¤¾å±±ç”°æ§˜ã€Aç¤¾éˆ´æœ¨æ§˜

è­°é¡Œï¼šæ–°ã‚·ã‚¹ãƒ†ãƒ ã®è¦ä»¶ç¢ºèª

å±±ç”°æ§˜ï¼šå…ˆæ—¥ãŠé€ã‚Šã„ãŸã ã„ãŸææ¡ˆæ›¸ã‚’ç¢ºèªã—ã¾ã—ãŸã€‚
æœ«æ­¦æ§˜ï¼šã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚ã”ä¸æ˜ãªç‚¹ã¯ã”ã–ã„ã¾ã™ã‹ï¼Ÿ
éˆ´æœ¨æ§˜ï¼šä¾¡æ ¼é¢ã«ã¤ã„ã¦è©³ã—ãæ•™ãˆã¦ã„ãŸã ã‘ã¾ã™ã‹ã€‚
æœ«æ­¦æ§˜ï¼šåˆæœŸè²»ç”¨ã¯50ä¸‡å††ã€æœˆé¡ã¯3ä¸‡å††ã‚’æƒ³å®šã—ã¦ã„ã¾ã™ã€‚

ã€æ±ºå®šäº‹é …ã€‘
- æ¥é€±ã¾ã§ã«è©³ç´°è¦‹ç©ã‚‚ã‚Šã‚’æå‡º
- æŠ€è¡“ä»•æ§˜æ›¸ã‚’ä½œæˆ

ã€æ¬¡å›ã€‘
6æœˆ23æ—¥ 14:00
```

---

## 7. ã‚¨ãƒ©ãƒ¼ãƒãƒ³ãƒ‰ãƒªãƒ³ã‚°

### 7.1 å…±é€šã‚¨ãƒ©ãƒ¼å‡¦ç†

```javascript
function handleError(error, context) {
    const errorMessages = {
        'ENOENT': 'ãƒ•ã‚¡ã‚¤ãƒ«ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“',
        'EACCES': 'ãƒ•ã‚¡ã‚¤ãƒ«ã¸ã®ã‚¢ã‚¯ã‚»ã‚¹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“',
        'ENOSPC': 'ãƒ‡ã‚£ã‚¹ã‚¯å®¹é‡ãŒä¸è¶³ã—ã¦ã„ã¾ã™',
        'SQLITE_ERROR': 'ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¨ãƒ©ãƒ¼ãŒç™ºç”Ÿã—ã¾ã—ãŸ'
    };
    
    const message = errorMessages[error.code] || error.message;
    console.error(`ã‚¨ãƒ©ãƒ¼ï¼ˆ${context}ï¼‰: ${message}`);
    
    // ãƒ‡ãƒãƒƒã‚°æƒ…å ±
    if (process.env.DEBUG) {
        console.error('è©³ç´°:', error);
    }
}
```

### 7.2 ä½¿ç”¨ä¾‹

```javascript
try {
    const content = await fs.readFile(filePath, 'utf-8');
} catch (error) {
    handleError(error, 'ãƒ•ã‚¡ã‚¤ãƒ«èª­ã¿è¾¼ã¿');
    return;
}
```

---

## å®Ÿè£…é–‹å§‹ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [ ] Node.jsãŒã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã•ã‚Œã¦ã„ã‚‹
- [ ] ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆãƒ•ã‚©ãƒ«ãƒ€ã‚’ä½œæˆã—ãŸ
- [ ] ã“ã®è¨­è¨ˆæ›¸ã‚’ç†è§£ã—ãŸ
- [ ] Claude Codeã®æº–å‚™ãŒã§ããŸ

æº–å‚™ãŒã§ããŸã‚‰ã€ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¨ä¸€ç·’ã«ã“ã®è¨­è¨ˆæ›¸ã‚’Claude Codeã«æ¸¡ã—ã¦ãã ã•ã„ã€‚

é ‘å¼µã£ã¦ãã ã•ã„ï¼ğŸš€